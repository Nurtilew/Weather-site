<!DOCTYPE html>
<html lang="kk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–ê—É–∞ —Ä–∞–π—ã (–∞–¥–∞–ø—Ç–∏–≤, –∂–∞—Å—ã–ª-–∞“õ)</title>
  <style>
    :root {
      --bg1:#e9fff0; --bg2:#ddfff6; --accent:#00c853; --accent-2:#007a3d; --card:rgba(255,255,255,0.7);
      --text:#063b2a;
    }
    *{box-sizing:border-box}
    body{
      margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
      min-height:100vh;display:flex;align-items:center;justify-content:center;
      background:linear-gradient(135deg,var(--bg1),var(--bg2));color:var(--text);
      padding:20px;
    }
    .wrap{
      width:100%;max-width:520px;padding:28px;border-radius:16px;background:var(--card);
      backdrop-filter:blur(6px);box-shadow:0 10px 30px rgba(4,54,36,0.15);
      transition:all .3s ease;
    }
    header{display:flex;align-items:center;gap:12px;margin-bottom:14px;flex-wrap:wrap;}
    h1{font-size:22px;margin:0;color:var(--accent-2);flex:1;}
    .controls{display:flex;gap:8px;margin-top:10px;flex-wrap:wrap;}
    input[type="text"]{
      flex:1;min-width:160px;padding:10px 12px;border-radius:10px;
      border:2px solid rgba(0,0,0,0.08);font-size:15px;outline:none;
      width:100%;
    }
    button{
      background:var(--accent);color:white;border:none;padding:10px 14px;border-radius:10px;font-weight:600;
      cursor:pointer;transition:background .25s;
    }
    button:hover{background:#00b64a}
    button.alt{background:transparent;border:2px solid var(--accent);color:var(--accent-2)}
    button.alt:hover{background:var(--accent-2);color:white}
    .note{font-size:13px;color:rgba(6,59,42,0.8);margin-top:8px}
    .result{
      margin-top:18px;padding:16px;border-radius:12px;
      background:linear-gradient(180deg,rgba(255,255,255,0.92),rgba(255,255,255,0.85));
      word-break:break-word;
    }
    .row{display:flex;align-items:center;gap:12px;flex-wrap:wrap;}
    .city{font-size:18px;font-weight:700}
    .temp{font-size:36px;font-weight:800;color:var(--accent-2)}
    .desc{text-transform:capitalize;font-size:15px;margin-top:6px}
    .meta{font-size:13px;color:rgba(6,59,42,0.7);margin-top:8px}
    .error{color:#8b0000;font-weight:700}
    .spinner{
      width:18px;height:18px;border-radius:50%;
      border:3px solid rgba(0,0,0,0.08);border-top-color:var(--accent);
      animation:spin 1s linear infinite;display:inline-block;vertical-align:middle;
    }
    footer{margin-top:14px;font-size:13px;color:rgba(6,59,42,0.6);text-align:center}
    img.icon{width:84px;height:84px}
    @keyframes spin{to{transform:rotate(360deg)}}
    @media (max-width:768px){
      .wrap{max-width:90%;padding:20px}
      h1{font-size:20px;text-align:center;width:100%}
      .controls{flex-direction:column;align-items:stretch}
      input,button{width:100%}
      .row{justify-content:center;text-align:center}
    }
    @media (max-width:480px){
      body{padding:10px}
      .temp{font-size:30px}
      img.icon{width:64px;height:64px}
      .wrap{padding:16px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <svg width="36" height="36" viewBox="0 0 24 24" fill="none">
        <path d="M6 14.5a4.5 4.5 0 1 0 9 0 4.5 4.5 0 0 0-9 0z" fill="#00c853"/>
        <path d="M13 4.5V3" stroke="#004d26" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M8 6L7 4" stroke="#004d26" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <h1>–ê—É–∞ —Ä–∞–π—ã (–∞–¥–∞–ø—Ç–∏–≤)</h1>
    </header>

    <div class="controls">
      <input id="cityInput" type="text" placeholder="–ú—ã—Å–∞–ª—ã: Almaty, Shymkent...">
      <button id="searchBtn">–Ü–∑–¥–µ—É</button>
    </div>

    <div id="output" class="result">
      <div class="meta">“ö–∞–ª–∞–Ω—ã –∂–∞–∑—ã–ø, <b>–Ü–∑–¥–µ—É</b>-–¥—ñ –±–∞—Å.</div>
    </div>

    <footer>OpenWeather –∞—Ä“õ—ã–ª—ã ‚Ä¢ –ê–¥–∞–ø—Ç–∏–≤ –¥–∏–∑–∞–π–Ω üåø</footer>
  </div>

  <script>
    const API_KEY = "a7c04541a8793ebeb4a7bfa536fd11b5";
    const cityInput = document.getElementById('cityInput');
    const searchBtn = document.getElementById('searchBtn');
    const locBtn = document.getElementById('locBtn');
    const output = document.getElementById('output');

    const show = html => output.innerHTML = html;
    const loading = t => show(`<div class="meta"><span class="spinner"></span> ${t}</div>`);
    const error = m => show(`<div class="error">${m}</div>`);

    async function getWeather(url){
      try{
        const res = await fetch(url);
        if(!res.ok){
          if(res.status===401) return error("API –∫—ñ–ª—Ç –∂–∞—Ä–∞–º—Å—ã–∑ (401).");
          if(res.status===404) return error("“ö–∞–ª–∞ —Ç–∞–±—ã–ª–º–∞–¥—ã.");
          return error("“ö–∞—Ç–µ: "+res.status);
        }
        const d = await res.json();
        const name = d.name, t = Math.round(d.main.temp);
        const desc = d.weather[0].description;
        const icon = d.weather[0].icon;
        const h = d.main.humidity, w = d.wind.speed;
        show(`
          <div class="row">
            <div>
              <div class="city">${name}</div>
              <div class="temp">${t}¬∞C</div>
              <div class="desc">${desc}</div>
              <div class="meta">–´–ª“ì–∞–ª: ${h}% ¬∑ –ñ–µ–ª: ${w} –º/—Å</div>
            </div>
            <div style="margin-left:auto;text-align:center">
              <img class="icon" src="https://openweathermap.org/img/wn/${icon}@2x.png" alt="${desc}">
            </div>
          </div>
        `);
      }catch(e){error("–ò–Ω—Ç–µ—Ä–Ω–µ—Ç –Ω–µ API “õ–∞—Ç–µ—Å—ñ");}
    }

    searchBtn.onclick = ()=>{
      const c = cityInput.value.trim();
      if(!c) return error("“ö–∞–ª–∞–Ω—ã –µ–Ω–≥—ñ–∑.");
      if(!API_KEY || API_KEY==="YOUR_API_KEY_HERE") return error("API key –æ—Ä–Ω–∞—Ç.");
      loading("–ñ“Ø–∫—Ç–µ–ª—ñ–ø –∂–∞—Ç—ã—Ä...");
      const url = `https://api.openweathermap.org/data/2.5/weather?q=${encodeURIComponent(c)}&appid=${API_KEY}&units=metric&lang=kk`;
      getWeather(url);
    }

    cityInput.addEventListener("keydown", e=>{if(e.key==="Enter") searchBtn.click()});
    locBtn.onclick = ()=>{
      if(!navigator.geolocation) return error("–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è “õ–æ–ª –∂–µ—Ç—ñ–º—Å—ñ–∑.");
      loading("–û—Ä–Ω—ã“£ –∞–Ω—ã“õ—Ç–∞–ª—É–¥–∞...");
      navigator.geolocation.getCurrentPosition(p=>{
        const {latitude,longitude}=p.coords;
        const url = `https://api.openweathermap.org/data/2.5/weather?lat=${latitude}&lon=${longitude}&appid=${API_KEY}&units=metric&lang=kk`;
        getWeather(url);
      },()=>error("–û—Ä–Ω—ã“£ —Ç–∞–±—ã–ª–º–∞–¥—ã."));
    }
  </script>
</body>
</html>
